(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const ve={home:"Home",profile:"Profile",friends:"Friends",settings:"Settings",users:"Users"},ye={login:"Login",logout:"Logout",save:"Add User",cancel:"Cancel",edit:"Edit",delete:"Delete",submit:"Submit"},we={welcome:"Welcome!",error:"An error occurred",success:"Operation successful",loading:"Loading...",noData:"No data available"},Ee={username:"Enter user name",password:"Enter user password",email:"Enter user email",confirmPassword:"Confirm Password",userInfo:"Enter user information"},Ce={play:"Play",score:"Score",winner:"Winner",gameOver:"Game Over"},Se={welcomeBack:"Welcome Back",signIn:"Sign in to your account",forgotPassword:"Forgot your password?",loginSuccess:"Login successful!",loginError:"Login failed",signupSuccess:"Account created! You can log in now.",createAccount:"New around here?",signupSubtitle:"Create your own account.",continueGuest:"Continue as guest"},xe={welcome:"Welcome",userInfo:"User Information",enable2FA:"Enable 2FA",logout:"Logout",friends:"Friends",matchHistory:"Match History"},Ae={setup:"Two-Factor Authentication Setup",scanQR:"Scan this QR code with your authenticator app:",enterCode:"Enter the 6-digit code from your authenticator:",verify:"Verify and Enable 2FA",backToProfile:"Back to Profile",setupSuccess:"2FA has been successfully enabled!",setupError:"Failed to enable 2FA",invalidCode:"Invalid verification code",generate:"Generate 2FA",remove:"Remove 2FA",chooseMethod:"Choose how to set the 2FA",sms:"SMS",qrCode:"QR Code",email:"Email",phoneNumber:"Enter PhoneNumber with the right prefix",sendSMS:"Send SMS",sendEmail:"Send Email",enterCodePlaceholder:"Enter code",verifyCode:"Verify Code",removeSuccess:"2FA removed successfully!",enableSuccess:"2FA enabled successfully!"},Le={enterName:"Please enter a name",enterUserInfo:"Please enter some user information",enterEmail:"Please enter a email",enterPassword:"Please enter a password",enterUsername:"Please enter a username",addUserError:"Error adding user",fetchUsersError:"Error fetching users"},Fe={userName:"User Name",userInfo:"User Info",userEmail:"User Email"},ke={noFriends:"No friends to list.",remove:"Remove",confirmRemove:"Are you sure you want to remove {name} as a friend?",sendRequest:"Send Friend Request",addFriend:"Add Friend",enterUsername:"Enter username",sendRequestBtn:"Send Request",enterUsernameError:"Please enter a username.",userNotFound:"User not found.",requestSent:"Friend request sent!",errorOccurred:"An error occurred.",friendRequests:"Friend Requests",noPendingRequests:"No pending requests.",from:"From",accept:"Accept",reject:"Reject",failedToLoad:"Failed to load requests."},Ne={newName:"New Name",newInfo:"New Info",newEmail:"New Email",newPassword:"New Password",updateError:"Error updating user"},qe={logoutFailed:"Logout failed. Please try again."},$e={nav:ve,buttons:ye,messages:we,forms:Ee,game:Ce,auth:Se,profile:xe,twoFA:Ae,validation:Le,userList:Fe,friends:ke,userEdit:Ne,errors:qe},Pe={home:"InÃ­cio",profile:"Perfil",friends:"Amigos",settings:"DefiniÃ§Ãµes",users:"Utilizadores"},Ie={login:"Entrar",logout:"Sair",save:"Adicionar Utilizador",cancel:"Cancelar",edit:"Editar",delete:"Eliminar",submit:"Submeter"},Be={welcome:"Bem-vindo!",error:"Ocorreu um erro",success:"OperaÃ§Ã£o bem-sucedida",loading:"A carregar...",noData:"NÃ£o hÃ¡ dados disponÃ­veis"},Te={username:"Inserir nome de utilizador",password:"Inserir palavra-passe",email:"Inserir email",confirmPassword:"Confirmar palavra-passe",userInfo:"Inserir informaÃ§Ã£o do utilizador"},Ue={play:"Jogar",score:"PontuaÃ§Ã£o",winner:"Vencedor",gameOver:"Fim de jogo"},je={welcomeBack:"Bem-vindo de volta",signIn:"Inicie sessÃ£o na sua conta",forgotPassword:"Esqueceu-se da palavra-passe?",loginSuccess:"Login bem-sucedido!",loginError:"Falha no login",signupSuccess:"Conta criada! JÃ¡ pode iniciar sessÃ£o.",createAccount:"Criar conta",signupSubtitle:"Personalize seu perfil, convide amigos e suba no ranking.",continueGuest:"Continuar como convidado"},Me={welcome:"Bem-vindo",userInfo:"InformaÃ§Ãµes do Utilizador",enable2FA:"Ativar 2FA",logout:"Sair",friends:"Amigos",matchHistory:"HistÃ³rico de Partidas"},Re={setup:"ConfiguraÃ§Ã£o de AutenticaÃ§Ã£o de Dois Fatores",scanQR:"Digitalize este cÃ³digo QR com a sua aplicaÃ§Ã£o autenticadora:",enterCode:"Insira o cÃ³digo de 6 dÃ­gitos do seu autenticador:",verify:"Verificar e Ativar 2FA",backToProfile:"Voltar ao Perfil",setupSuccess:"2FA foi ativado com sucesso!",setupError:"Falha ao ativar 2FA",invalidCode:"CÃ³digo de verificaÃ§Ã£o invÃ¡lido",generate:"Gerar 2FA",remove:"Remover 2FA",chooseMethod:"Escolha como configurar o 2FA",sms:"SMS",qrCode:"CÃ³digo QR",email:"Email",phoneNumber:"Insira o nÃºmero de telefone com o prefixo correto",sendSMS:"Enviar SMS",sendEmail:"Enviar Email",enterCodePlaceholder:"Inserir cÃ³digo",verifyCode:"Verificar CÃ³digo",removeSuccess:"2FA removido com sucesso!",enableSuccess:"2FA ativado com sucesso!"},ze={enterName:"Por favor, insira um nome",enterUserInfo:"Por favor, insira informaÃ§Ãµes do utilizador",enterEmail:"Por favor, insira um email",enterPassword:"Por favor, insira uma palavra-passe",enterUsername:"Por favor, insira um nome de utilizador",addUserError:"Erro ao adicionar utilizador",fetchUsersError:"Erro ao obter utilizadores"},Oe={userName:"Nome do Utilizador",userInfo:"InformaÃ§Ã£o do Utilizador",userEmail:"Email do Utilizador"},De={noFriends:"NÃ£o hÃ¡ amigos para listar.",remove:"Remover",confirmRemove:"Tem certeza de que deseja remover {name} como amigo?",sendRequest:"Enviar Pedido de Amizade",addFriend:"Adicionar Amigo",enterUsername:"Inserir nome de utilizador",sendRequestBtn:"Enviar Pedido",enterUsernameError:"Por favor, insira um nome de utilizador.",userNotFound:"Utilizador nÃ£o encontrado.",requestSent:"Pedido de amizade enviado!",errorOccurred:"Ocorreu um erro.",friendRequests:"Pedidos de Amizade",noPendingRequests:"NÃ£o hÃ¡ pedidos pendentes.",from:"De",accept:"Aceitar",reject:"Rejeitar",failedToLoad:"Falha ao carregar pedidos."},He={newName:"Novo Nome",newInfo:"Nova InformaÃ§Ã£o",newEmail:"Novo Email",newPassword:"Nova Palavra-passe",updateError:"Erro ao atualizar utilizador"},Ge={logoutFailed:"Falha ao sair. Tente novamente."},Ve={nav:Pe,buttons:Ie,messages:Be,forms:Te,game:Ue,auth:je,profile:Me,twoFA:Re,validation:ze,userList:Oe,friends:De,userEdit:He,errors:Ge},_e={home:"Startseite",profile:"Profil",friends:"Freunde",settings:"Einstellungen",users:"Benutzer"},We={login:"Anmelden",logout:"Abmelden",save:"Benutzer hinzufÃ¼gen",cancel:"Abbrechen",edit:"Bearbeiten",delete:"LÃ¶schen",submit:"Absenden"},Qe={welcome:"Willkommen!",error:"Ein Fehler ist aufgetreten",success:"Vorgang erfolgreich",loading:"Wird geladen...",noData:"Keine Daten verfÃ¼gbar"},Je={username:"Benutzernamen eingeben",password:"Passwort eingeben",email:"E-Mail eingeben",confirmPassword:"Passwort bestÃ¤tigen",userInfo:"Benutzerinformationen eingeben"},Ye={play:"Spielen",score:"Punktzahl",winner:"Gewinner",gameOver:"Spiel beendet"},Ke={welcomeBack:"Willkommen zurÃ¼ck",signIn:"Bei Ihrem Konto anmelden",forgotPassword:"Passwort vergessen?",loginSuccess:"Anmeldung erfolgreich!",loginError:"Anmeldung fehlgeschlagen",signupSuccess:"Konto erstellt! Du kannst dich jetzt anmelden.",createAccount:"Konto erstellen",signupSubtitle:"Passe dein Profil an, lade Freunde ein und klettere auf der Rangliste.",continueGuest:"Als Gast fortfahren"},Xe={welcome:"Willkommen",userInfo:"Benutzerinformationen",enable2FA:"2FA aktivieren",logout:"Abmelden",friends:"Freunde",matchHistory:"Spielverlauf"},Ze={setup:"Zwei-Faktor-Authentifizierung einrichten",scanQR:"Scannen Sie diesen QR-Code mit Ihrer Authenticator-App:",enterCode:"Geben Sie den 6-stelligen Code von Ihrem Authenticator ein:",verify:"ÃœberprÃ¼fen und 2FA aktivieren",backToProfile:"ZurÃ¼ck zum Profil",setupSuccess:"2FA wurde erfolgreich aktiviert!",setupError:"Fehler beim Aktivieren von 2FA",invalidCode:"UngÃ¼ltiger BestÃ¤tigungscode",generate:"2FA generieren",remove:"2FA entfernen",chooseMethod:"WÃ¤hlen Sie, wie Sie 2FA einrichten mÃ¶chten",sms:"SMS",qrCode:"QR-Code",email:"E-Mail",phoneNumber:"Telefonnummer mit richtigem PrÃ¤fix eingeben",sendSMS:"SMS senden",sendEmail:"E-Mail senden",enterCodePlaceholder:"Code eingeben",verifyCode:"Code Ã¼berprÃ¼fen",removeSuccess:"2FA erfolgreich entfernt!",enableSuccess:"2FA erfolgreich aktiviert!"},et={enterName:"Bitte geben Sie einen Namen ein",enterUserInfo:"Bitte geben Sie Benutzerinformationen ein",enterEmail:"Bitte geben Sie eine E-Mail ein",enterPassword:"Bitte geben Sie ein Passwort ein",enterUsername:"Bitte geben Sie einen Benutzernamen ein",addUserError:"Fehler beim HinzufÃ¼gen des Benutzers",fetchUsersError:"Fehler beim Abrufen der Benutzer"},tt={userName:"Benutzername",userInfo:"Benutzerinfo",userEmail:"Benutzer-E-Mail"},nt={noFriends:"Keine Freunde aufzulisten.",remove:"Entfernen",confirmRemove:"Sind Sie sicher, dass Sie {name} als Freund entfernen mÃ¶chten?",sendRequest:"Freundschaftsanfrage senden",addFriend:"Freund hinzufÃ¼gen",enterUsername:"Benutzernamen eingeben",sendRequestBtn:"Anfrage senden",enterUsernameError:"Bitte geben Sie einen Benutzernamen ein.",userNotFound:"Benutzer nicht gefunden.",requestSent:"Freundschaftsanfrage gesendet!",errorOccurred:"Ein Fehler ist aufgetreten.",friendRequests:"Freundschaftsanfragen",noPendingRequests:"Keine ausstehenden Anfragen.",from:"Von",accept:"Annehmen",reject:"Ablehnen",failedToLoad:"Fehler beim Laden der Anfragen."},at={newName:"Neuer Name",newInfo:"Neue Information",newEmail:"Neue E-Mail",newPassword:"Neues Passwort",updateError:"Fehler beim Aktualisieren des Benutzers"},ot={logoutFailed:"Abmeldung fehlgeschlagen. Bitte versuchen Sie es erneut."},rt={nav:_e,buttons:We,messages:Qe,forms:Je,game:Ye,auth:Ke,profile:Xe,twoFA:Ze,validation:et,userList:tt,friends:nt,userEdit:at,errors:ot},st={home:"Hjem",profile:"Profil",friends:"Venner",settings:"Innstillinger",users:"Brukere"},it={login:"Logg inn",logout:"Logg ut",save:"Legg til bruker",cancel:"Avbryt",edit:"Rediger",delete:"Slett",submit:"Send inn"},lt={welcome:"Velkommen!",error:"En feil oppstod",success:"Operasjon vellykket",loading:"Laster...",noData:"Ingen data tilgjengelig"},dt={username:"Skriv inn brukernavn",password:"Skriv inn passord",email:"Skriv inn e-post",confirmPassword:"Bekreft passord",userInfo:"Skriv inn brukerinformasjon"},ct={play:"Spill",score:"Poengsum",winner:"Vinner",gameOver:"Spill over"},ut={welcomeBack:"Velkommen tilbake",signIn:"Logg inn pÃ¥ kontoen din",forgotPassword:"Glemt passordet?",loginSuccess:"Innlogging vellykket!",loginError:"Innlogging mislyktes",signupSuccess:"Konto opprettet! Du kan logge inn nÃ¥.",createAccount:"Opprett konto",signupSubtitle:"Tilpass profilen, inviter venner og klatre pÃ¥ ranglisten.",continueGuest:"Fortsett som gjest"},mt={welcome:"Velkommen",userInfo:"Brukerinformasjon",enable2FA:"Aktiver 2FA",logout:"Logg ut",friends:"Venner",matchHistory:"Kamphistorikk"},pt={setup:"To-faktor autentisering oppsett",scanQR:"Skann denne QR-koden med autentiseringsappen din:",enterCode:"Skriv inn 6-sifret kode fra autentiseringen:",verify:"Verifiser og aktiver 2FA",backToProfile:"Tilbake til profil",setupSuccess:"2FA har blitt aktivert!",setupError:"Kunne ikke aktivere 2FA",invalidCode:"Ugyldig verifiseringskode",generate:"Generer 2FA",remove:"Fjern 2FA",chooseMethod:"Velg hvordan du vil sette opp 2FA",sms:"SMS",qrCode:"QR-kode",email:"E-post",phoneNumber:"Skriv inn telefonnummer med riktig prefiks",sendSMS:"Send SMS",sendEmail:"Send e-post",enterCodePlaceholder:"Skriv inn kode",verifyCode:"Bekreft kode",removeSuccess:"2FA fjernet!",enableSuccess:"2FA aktivert!"},ft={enterName:"Vennligst skriv inn et navn",enterUserInfo:"Vennligst skriv inn brukerinformasjon",enterEmail:"Vennligst skriv inn en e-post",enterPassword:"Vennligst skriv inn et passord",enterUsername:"Vennligst skriv inn et brukernavn",addUserError:"Feil ved Ã¥ legge til bruker",fetchUsersError:"Feil ved henting av brukere"},gt={userName:"Brukernavn",userInfo:"Brukerinfo",userEmail:"Bruker e-post"},ht={noFriends:"Ingen venner Ã¥ liste.",remove:"Fjern",confirmRemove:"Er du sikker pÃ¥ at du vil fjerne {name} som venn?",sendRequest:"Send venneforespÃ¸rsel",addFriend:"Legg til venn",enterUsername:"Skriv inn brukernavn",sendRequestBtn:"Send forespÃ¸rsel",enterUsernameError:"Vennligst skriv inn et brukernavn.",userNotFound:"Bruker ikke funnet.",requestSent:"VenneforespÃ¸rsel sendt!",errorOccurred:"En feil oppstod.",friendRequests:"VenneforespÃ¸rsler",noPendingRequests:"Ingen ventende forespÃ¸rsler.",from:"Fra",accept:"Godta",reject:"Avvis",failedToLoad:"Kunne ikke laste forespÃ¸rsler."},bt={newName:"Nytt navn",newInfo:"Ny informasjon",newEmail:"Ny e-post",newPassword:"Nytt passord",updateError:"Feil ved oppdatering av bruker"},vt={logoutFailed:"Utlogging mislyktes. PrÃ¸v igjen."},yt={nav:st,buttons:it,messages:lt,forms:dt,game:ct,auth:ut,profile:mt,twoFA:pt,validation:ft,userList:gt,friends:ht,userEdit:bt,errors:vt},wt={home:"ãƒ›ãƒ¼ãƒ ",profile:"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",friends:"å‹é”",settings:"è¨­å®š",users:"ãƒ¦ãƒ¼ã‚¶ãƒ¼"},Et={login:"ãƒ­ã‚°ã‚¤ãƒ³",logout:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",save:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¿½åŠ ",cancel:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",edit:"ç·¨é›†",delete:"å‰Šé™¤",submit:"é€ä¿¡"},Ct={welcome:"ã‚ˆã†ã“ãï¼",error:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",success:"æ“ä½œãŒæˆåŠŸã—ã¾ã—ãŸ",loading:"èª­ã¿è¾¼ã¿ä¸­...",noData:"ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"},St={username:"ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›",password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›",email:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›",confirmPassword:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª",userInfo:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å…¥åŠ›"},xt={play:"ãƒ—ãƒ¬ã‚¤",score:"ã‚¹ã‚³ã‚¢",winner:"å‹è€…",gameOver:"ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼"},At={welcomeBack:"ãŠã‹ãˆã‚Šãªã•ã„",signIn:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚µã‚¤ãƒ³ã‚¤ãƒ³",forgotPassword:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠå¿˜ã‚Œã§ã™ã‹ï¼Ÿ",loginSuccess:"ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸï¼",loginError:"ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ",signupSuccess:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã™ã€‚",createAccount:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ",signupSubtitle:"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ•´ãˆã¦ã€å‹é”ã‚’æ‹›å¾…ã—ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’é§†ã‘ä¸ŠãŒã‚ã†ã€‚",continueGuest:"ã‚²ã‚¹ãƒˆã¨ã—ã¦ç¶šè¡Œ"},Lt={welcome:"ã‚ˆã†ã“ã",userInfo:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±",enable2FA:"2FAã‚’æœ‰åŠ¹ã«ã™ã‚‹",logout:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",friends:"å‹é”",matchHistory:"è©¦åˆå±¥æ­´"},Ft={setup:"äºŒè¦ç´ èªè¨¼è¨­å®š",scanQR:"èªè¨¼ã‚¢ãƒ—ãƒªã§ã“ã®QRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ãã ã•ã„ï¼š",enterCode:"èªè¨¼ã‚¢ãƒ—ãƒªã‹ã‚‰6æ¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š",verify:"ç¢ºèªã—ã¦2FAã‚’æœ‰åŠ¹ã«ã™ã‚‹",backToProfile:"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã«æˆ»ã‚‹",setupSuccess:"2FAãŒæ­£å¸¸ã«æœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸï¼",setupError:"2FAã®æœ‰åŠ¹åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ",invalidCode:"ç„¡åŠ¹ãªç¢ºèªã‚³ãƒ¼ãƒ‰ã§ã™",generate:"2FAã‚’ç”Ÿæˆ",remove:"2FAã‚’å‰Šé™¤",chooseMethod:"2FAã®è¨­å®šæ–¹æ³•ã‚’é¸æŠžã—ã¦ãã ã•ã„",sms:"SMS",qrCode:"QRã‚³ãƒ¼ãƒ‰",email:"ãƒ¡ãƒ¼ãƒ«",phoneNumber:"æ­£ã—ã„ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä»˜ãã®é›»è©±ç•ªå·ã‚’å…¥åŠ›",sendSMS:"SMSé€ä¿¡",sendEmail:"ãƒ¡ãƒ¼ãƒ«é€ä¿¡",enterCodePlaceholder:"ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›",verifyCode:"ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª",removeSuccess:"2FAãŒæ­£å¸¸ã«å‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼",enableSuccess:"2FAãŒæ­£å¸¸ã«æœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸï¼"},kt={enterName:"åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",enterUserInfo:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",enterEmail:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",enterPassword:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",enterUsername:"ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",addUserError:"ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ ã‚¨ãƒ©ãƒ¼",fetchUsersError:"ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—ã‚¨ãƒ©ãƒ¼"},Nt={userName:"ãƒ¦ãƒ¼ã‚¶ãƒ¼å",userInfo:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±",userEmail:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ¼ãƒ«"},qt={noFriends:"è¡¨ç¤ºã™ã‚‹å‹é”ãŒã„ã¾ã›ã‚“ã€‚",remove:"å‰Šé™¤",confirmRemove:"æœ¬å½“ã«{name}ã‚’å‹é”ã‹ã‚‰å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ",sendRequest:"å‹é”ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡",enterUsername:"ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›",addFriend:"ãƒ•ãƒ¬ãƒ³ãƒ‰è¿½åŠ ",sendRequestBtn:"ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡",enterUsernameError:"ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",userNotFound:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚",requestSent:"å‹é”ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸï¼",errorOccurred:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",friendRequests:"å‹é”ãƒªã‚¯ã‚¨ã‚¹ãƒˆ",noPendingRequests:"ä¿ç•™ä¸­ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",from:"é€ä¿¡è€…",accept:"æ‰¿èª",reject:"æ‹’å¦",failedToLoad:"ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚"},$t={newName:"æ–°ã—ã„åå‰",newInfo:"æ–°ã—ã„æƒ…å ±",newEmail:"æ–°ã—ã„ãƒ¡ãƒ¼ãƒ«",newPassword:"æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",updateError:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ã‚¨ãƒ©ãƒ¼"},Pt={logoutFailed:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚"},It={nav:wt,buttons:Et,messages:Ct,forms:St,game:xt,auth:At,profile:Lt,twoFA:Ft,validation:kt,userList:Nt,friends:qt,userEdit:$t,errors:Pt},Bt={home:"KÃ«r gi",profile:"Profil",friends:"Xarit",settings:"Seetlu",users:"User yi"},Tt={login:"Dugg",logout:"GÃ©nn",save:"Yokk user bu bees",cancel:"Jobbal",edit:"Soppi",delete:"Far",submit:"YÃ³nnee"},Ut={welcome:"Dalal ak jamm!",error:"Am na ay njumte",success:"JÃ«f ji baax na",loading:"Dafa toy yokk...",noData:"Amul done"},jt={username:"Bind tur user bi",password:"Bind baatin bi",email:"Bind email bi",confirmPassword:"Def baatin bi",userInfo:"Bind xibaar user bi"},Mt={play:"Fecc",score:"Point",winner:"Moom la jaayee",gameOver:"Fecc bi jeex na"},Rt={welcomeBack:"Dalal ak jamm bu bees",signIn:"Dugg ci sa compte bi",forgotPassword:"Fatte nga sa baatin?",loginSuccess:"Dugg gi baax na!",loginError:"Dugg gi amul",signupSuccess:"Kont bi sos na! Man nga dugg leegi.",createAccount:"Sos kont",signupSubtitle:"Soppi sa profil, woow sa xarit yi te yegg ci classement bi.",continueGuest:"TÃ llal ci xaalis bu jÃ«kkÃ«r"},zt={welcome:"Dalal ak jamm",userInfo:"Xibaar user bi",enable2FA:"Doxal 2FA",logout:"GÃ©nn",friends:"Xarit",matchHistory:"Jaar fecc yi"},Ot={setup:"Seetlu authentification bu Ã±aar",scanQR:"JÃ llal kodu QR bii ak appli autentifiant bi:",enterCode:"Bind kodu 6 xÃ«t yi ci sa authenticator:",verify:"Wone te doxal 2FA",backToProfile:"Dellu ci profil bi",setupSuccess:"2FA doxal na baax!",setupError:"Doxal 2FA amul",invalidCode:"Kodu verification bi baaxul",generate:"Sos 2FA",remove:"Far 2FA",chooseMethod:"TÃ nn ni nga bÃ«gg a seet 2FA",sms:"SMS",qrCode:"Kodu QR",email:"Email",phoneNumber:"Bind nimero telefon ak prefix bu baax",sendSMS:"YÃ³nnee SMS",sendEmail:"YÃ³nnee Email",enterCodePlaceholder:"Bind kodu bi",verifyCode:"Wone kodu bi",removeSuccess:"2FA far na baax!",enableSuccess:"2FA doxal na baax!"},Dt={enterName:"Bu baax la bind tur",enterUserInfo:"Bu baax la bind xibaar user bi",enterEmail:"Bu baax la bind email",enterPassword:"Bu baax la bind baatin",enterUsername:"Bu baax la bind tur user bi",addUserError:"Njumte ci yokk user bi",fetchUsersError:"Njumte ci jel user yi"},Ht={userName:"Tur User bi",userInfo:"Xibaar User bi",userEmail:"Email User bi"},Gt={noFriends:"Amul xarit yu wone.",remove:"Far",confirmRemove:"Ndax dÃ«gg nga ni bÃ«gga far {name} ci xarit yi?",sendRequest:"YÃ³nnee Ã±aari xarit",addFriend:"Yokk xarit",enterUsername:"Bind tur user bi",sendRequestBtn:"YÃ³nnee Ã±aari",enterUsernameError:"Bu baax la bind tur user bi.",userNotFound:"User bi Ã±u gisul.",requestSent:"Ã‘aari xarit bi yÃ³nnee na!",errorOccurred:"Am na njumte.",friendRequests:"Ã‘aari xarit yi",noPendingRequests:"Amul Ã±aari yu ngir.",from:"Ci",accept:"Def",reject:"Wer",failedToLoad:"Amul jel Ã±aari yi."},Vt={newName:"Tur bu bees",newInfo:"Xibaar bu bees",newEmail:"Email bu bees",newPassword:"Baatin bu bees",updateError:"Njumte ci soppil user bi"},_t={logoutFailed:"GÃ©nn gi amul. Ceetal ko."},Wt={nav:Bt,buttons:Tt,messages:Ut,forms:jt,game:Mt,auth:Rt,profile:zt,twoFA:Ot,validation:Dt,userList:Ht,friends:Gt,userEdit:Vt,errors:_t},Qt={en:"English",pt:"PortuguÃªs",de:"Deutsch",no:"Norsk",ja:"æ—¥æœ¬èªž",wo:"Wolof"},ne={en:$e,pt:Ve,de:rt,no:yt,ja:It,wo:Wt};let Y="en";function se(e,a){return a.split(".").reduce((n,o)=>n&&n[o]!==void 0?n[o]:void 0,e)}function Jt(){fetch("/api/lang",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(async e=>e.json()).then(e=>{Y=e.data.app_language})}function t(e,a){const n=se(ne[Y],e),o=Y!=="en"?se(ne.en,e):void 0;return n||o||e}function Yt(e){e in ne?(Y=e,fetch("/api/lang",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({newLanguage:e})}),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:e}}))):console.warn(`Language '${e}' is not supported`)}function ie(){return Y}function Kt(){return Qt}Jt();const Xt={en:"ðŸ‡¬ðŸ‡§",pt:"ðŸ‡µðŸ‡¹",de:"ðŸ‡©ðŸ‡ª",no:"ðŸ‡³ðŸ‡´",ja:"ðŸ‡¯ðŸ‡µ",wo:"ðŸ‡¸ðŸ‡³"};class ae{container;currentLang;constructor(a){this.container=document.getElementById(a)||document.body,this.currentLang=ie(),this.init(),this.bindEvents()}init(){this.render()}bindEvents(){window.addEventListener("languageChanged",a=>{const n=a;this.currentLang=n.detail.language,this.updateActiveFlag()})}render(){const a=Kt(),n=`
	  	  <div class="language-selector">
	  	    <div class="language-flags">
	  	      ${Object.entries(a).map(([o,r])=>`
	  	        <button 
	  	          class="flag-button ${o===this.currentLang?"active":""}" 
	  	          data-language="${o}"
	  	          title="${r}"
	  	          aria-label="Switch to ${r}"
	  	        >
	  	          <span class="flag-emoji">${Xt[o]}</span>
	  	        </button>
	  	      `).join("")}
	  	    </div>
	  	  </div>
	  	`;this.container.innerHTML=n,this.attachClickHandlers()}attachClickHandlers(){this.container.querySelectorAll(".flag-button").forEach(n=>{n.addEventListener("click",o=>{const s=o.currentTarget.getAttribute("data-language");s&&s!==this.currentLang&&(Yt(s),this.currentLang=s,this.updateActiveFlag())})})}updateActiveFlag(){this.container.querySelectorAll(".flag-button").forEach(o=>o.classList.remove("active"));const n=this.container.querySelector(`[data-language="${this.currentLang}"]`);n&&n.classList.add("active")}refresh(){this.currentLang=ie(),this.render()}}const Zt=`
  .language-selector {
    display: inline-block;
    user-select: none;
  }

  .language-flags {
    display: flex;
    gap: 8px;
    align-items: center;
    background: rgba(255, 255, 255, 0.1);
    padding: 8px;
    border-radius: 12px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .flag-button {
    background: none;
    border: 2px solid transparent;
    border-radius: 8px;
    padding: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    min-height: 40px;
    position: relative;
    overflow: hidden;
  }

  .flag-button:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .flag-button.active {
    border-color: #4CAF50;
    background: rgba(76, 175, 80, 0.1);
    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
  }

  .flag-button.active:hover {
    border-color: #45a049;
    background: rgba(76, 175, 80, 0.2);
  }

  .flag-emoji {
    font-size: 20px;
    line-height: 1;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
  }

  .flag-button:active {
    transform: translateY(0);
    transition: transform 0.1s ease;
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .language-flags {
      gap: 6px;
      padding: 6px;
    }
    
    .flag-button {
      min-width: 36px;
      min-height: 36px;
      padding: 4px;
    }
    
    .flag-emoji {
      font-size: 18px;
    }
  }

  /* Accessibility improvements */
  .flag-button:focus {
    outline: none;
    border-color: #2196F3;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.3);
  }

  .flag-button:focus:not(:hover) {
    background: rgba(33, 150, 243, 0.1);
  }
`;function oe(){if(!document.getElementById("language-selector-styles")){const e=document.createElement("style");e.id="language-selector-styles",e.textContent=Zt,document.head.appendChild(e)}}let V=null;function ee(e){document.body.classList.remove("landing-mode","app-mode"),document.body.classList.add(`${e}-mode`)}async function en(e){const a=e.trim();if(!a)return{success:!1,message:t("friends.enterUsernameError")};try{const n=await fetch(`/api/users/name/${encodeURIComponent(a)}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(n.status===404)return{success:!1,message:t("friends.userNotFound")};if(!n.ok)return{success:!1,message:n.statusText||t("friends.errorOccurred")};const o=await n.json(),r=o.data||o;if(!r?.id)return{success:!1,message:t("friends.errorOccurred")};const s=await fetch("/api/friends/request",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendId:r.id})});if(!s.ok){let i=s.statusText;try{const u=await s.json();i=u.message||u.error||i}catch{}return{success:!1,message:i||t("friends.errorOccurred")}}return{success:!0,message:t("friends.requestSent")}}catch(n){return console.error("Error sending friend request:",n),{success:!1,message:t("friends.errorOccurred")}}}function ce(){window.removeEventListener("languageChanged",X),window.removeEventListener("languageChanged",me)}function ue(){V&&(document.removeEventListener("click",V),V=null)}function X(){const e=document.querySelector('[data-role="dashboard-title"]');e&&(e.textContent=t("nav.home"));const a=document.querySelector('[data-role="session-title"]');a&&(a.textContent=t("profile.welcome"));const n=document.querySelector('[data-role="quick-form-title"]');n&&(n.textContent=t("buttons.save"));const o=document.querySelector('[data-role="community-title"]');o&&(o.textContent=t("nav.users"));const r=document.querySelector('[data-role="action-play"]');r&&(r.textContent=t("game.play"));const s=document.querySelector('[data-role="action-add-user"]');s&&(s.textContent=t("buttons.save"));const i=document.querySelector('[data-role="action-login"]');i&&(i.textContent=t("buttons.login"));const u=document.querySelector('[data-role="action-logout"]');u&&(u.textContent=t("profile.logout"));const p=document.querySelector('[data-role="input-name"]');p&&(p.placeholder=t("forms.username"));const w=document.querySelector('[data-role="input-info"]');w&&(w.placeholder=t("forms.userInfo"));const d=document.querySelector('[data-role="input-email"]');d&&(d.placeholder=t("forms.email"));const h=document.querySelector('[data-role="input-password"]');h&&(h.placeholder=t("forms.password"));const l=document.querySelector('[data-role="input-alias"]');l&&(l.placeholder=t("userEdit.newName")),document.querySelectorAll('[data-role="user-name-line"]').forEach(f=>{const b=f.getAttribute("data-value")||"";f.textContent=`${t("userList.userName")}: ${b}`}),document.querySelectorAll('[data-role="user-info-line"]').forEach(f=>{const b=f.getAttribute("data-value")||"";f.textContent=`${t("userList.userInfo")}: ${b}`}),document.querySelectorAll('[data-role="user-email-line"]').forEach(f=>{const b=f.getAttribute("data-value")||"";f.textContent=`${t("userList.userEmail")}: ${b}`})}function me(){const e=document.querySelector('[data-role="home-friends-title"]');e&&(e.textContent=t("profile.friends"));const a=document.querySelector('[data-role="home-friends-empty"]');if(a){const l=a.getAttribute("data-guest")==="true";a.textContent=t(l?"auth.signIn":"friends.noFriends")}const n=document.querySelector('[data-role="home-play-button"]');n&&(n.textContent=t("game.play"));const o=document.querySelector('[data-role="user-menu-manage"]');o&&(o.textContent=t("nav.users"));const r=document.querySelector('[data-role="user-menu-profile"]');r&&(r.textContent=t("profile.userInfo"));const s=document.querySelector('[data-role="user-menu-logout"]');s&&(s.textContent=t("profile.logout"));const i=document.querySelector('[data-role="home-add-friend"]');if(i){const l=i.getAttribute("data-mode");i.textContent=t(l==="login"?"buttons.login":"friends.addFriend")}const u=document.querySelector('[data-role="home-add-friend-input"]');u&&(u.placeholder=t("friends.enterUsername"));const p=document.querySelector('[data-role="user-menu-login"]');p&&(p.textContent=t("buttons.login"));const w=document.querySelector('[data-role="user-dropdown-name"]');if(w){const l=w.getAttribute("data-value");l&&(w.textContent=l)}const d=document.querySelector('[data-role="user-dropdown-email"]');if(d){const l=d.getAttribute("data-value");d.textContent=l||t("auth.signIn")}const h=document.querySelector('[data-role="user-dropdown-info"]');if(h){const l=h.getAttribute("data-value");h.textContent=l||""}}async function le(){ce(),ue(),ee("app");const e=document.querySelector("#app");if(!e)return;e.innerHTML="",e.classList.add("app-shell","home-shell"),oe();let a=null;try{a=await G()}catch(c){console.error("Failed to fetch user info for homepage:",c)}const n=a?.data?.safeUser,o=a?.data?.currentSession?.alias,r=n?.name||o||t("auth.guest"),s=n?.email||"",i=n?.info||"",u=document.createElement("div");u.className="home-wrapper",e.appendChild(u);const p=document.createElement("header");p.className="home-top-bar",u.appendChild(p);const w=document.createElement("div");w.className="home-brand";const d=document.createElement("strong");d.textContent="Transcendence",w.appendChild(d),p.appendChild(w);const h=document.createElement("div");h.className="home-top-controls",p.appendChild(h);const l=document.createElement("div");l.id="language-selector-container",h.appendChild(l);const S=document.createElement("div");S.className="home-user-menu";const m=document.createElement("button");m.className="home-user-button",m.dataset.role="home-user-button",m.textContent=r,S.appendChild(m);const v=document.createElement("div");v.className="home-user-dropdown",v.setAttribute("aria-hidden","true");const f=document.createElement("div");f.className="home-user-identity";const b=document.createElement("strong");b.dataset.role="user-dropdown-name",b.setAttribute("data-value",r),b.textContent=r,f.appendChild(b);const q=document.createElement("span");if(q.dataset.role="user-dropdown-email",q.setAttribute("data-value",s||""),q.textContent=s||t("auth.signIn"),f.appendChild(q),i){const c=document.createElement("span");c.dataset.role="user-dropdown-info",c.setAttribute("data-value",i),c.textContent=i,f.appendChild(c)}v.appendChild(f);const F=document.createElement("div");if(F.className="home-user-actions",n){const c=document.createElement("button");c.className="home-user-action",c.dataset.role="user-menu-profile",c.textContent=t("profile.userInfo"),c.addEventListener("click",()=>I("/profile")),F.appendChild(c);const T=document.createElement("button");T.className="home-user-action",T.dataset.role="user-menu-logout",T.textContent=t("profile.logout"),T.addEventListener("click",async()=>{T.disabled=!0;try{await re(n.name),I("/")}catch(R){const z=R instanceof Error?R.message:"Unknown error";alert(`${t("errors.logoutFailed")}: ${z}`)}finally{T.disabled=!1}}),F.appendChild(T)}else{const c=document.createElement("button");c.className="home-user-action",c.dataset.role="user-menu-login",c.textContent=t("buttons.login"),c.addEventListener("click",()=>I("/login")),F.appendChild(c)}v.appendChild(F),S.appendChild(v),h.appendChild(S);const U=c=>{c??!S.classList.contains("open")?(S.classList.add("open"),v.setAttribute("aria-hidden","false")):(S.classList.remove("open"),v.setAttribute("aria-hidden","true"))};m.addEventListener("click",c=>{c.stopPropagation(),U()}),V=c=>{S.contains(c.target)||U(!1)},document.addEventListener("click",V);const P=document.createElement("div");P.className="home-layout",u.appendChild(P);const $=document.createElement("section");$.className="home-hero";const x=document.createElement("button");x.className="home-play-button glow-button",x.dataset.role="home-play-button",x.textContent=t("game.play"),x.addEventListener("click",()=>I("/playGame")),$.appendChild(x),P.appendChild($);const y=document.createElement("aside");y.className="home-friend-bar",P.appendChild(y);const k=document.createElement("div");k.className="home-friends-header";const j=document.createElement("span");j.dataset.role="home-friends-title",j.textContent=t("profile.friends"),k.appendChild(j),y.appendChild(k);const N=document.createElement("div");N.className="home-friend-list",y.appendChild(N);const M=document.createElement("div");M.className="home-friend-cta";const B=document.createElement("input");B.className="home-add-input",B.type="text",B.dataset.role="home-add-friend-input",B.placeholder=t("friends.enterUsername"),B.autocomplete="off",M.appendChild(B);const g=document.createElement("button");g.className="home-add-friend glow-button secondary",g.dataset.role="home-add-friend",g.textContent=t("friends.addFriend"),g.setAttribute("data-mode",n?"add":"login"),M.appendChild(g);const E=document.createElement("div");E.className="home-add-feedback",E.dataset.role="home-add-friend-feedback",M.appendChild(E),y.appendChild(M);const C=document.createElement("span");C.dataset.role="home-friends-empty",C.textContent=t(n?"friends.noFriends":"auth.signIn"),C.setAttribute("data-guest",n?"false":"true"),N.appendChild(C);const L=c=>{if(N.innerHTML="",!c.length){C.textContent=t("friends.noFriends"),C.setAttribute("data-guest","false"),N.appendChild(C);return}c.forEach(T=>{const R=document.createElement("div");R.className="home-friend-pill";const z=document.createElement("span");z.className=T.online?"friend-status online":"friend-status offline";const D=document.createElement("span");D.textContent=T.name,R.append(z,D),N.appendChild(R)})},A=async()=>{if(!n){C.textContent=t("auth.signIn"),C.setAttribute("data-guest","true"),N.innerHTML="",N.appendChild(C),B.disabled=!0,g.disabled=!1,g.textContent=t("buttons.login"),g.setAttribute("data-mode","login");return}B.disabled=!1,g.disabled=!1,g.textContent=t("friends.addFriend"),g.setAttribute("data-mode","add");try{const c=await fetch("/api/friends",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!c.ok){let z=c.statusText;try{z=(await c.json()).error||z}catch{const D=await c.text();D&&(z=D)}throw new Error(z)}const T=await c.json(),R=T.data||T;Array.isArray(R)?L(R):L([])}catch(c){console.error("Failed to load friends:",c),N.innerHTML="",C.textContent=t("friends.failedToLoad"),C.setAttribute("data-guest","false"),N.appendChild(C)}};g.addEventListener("click",async()=>{if(!n){I("/login");return}const c=B.value.trim();if(!c){E.textContent=t("friends.enterUsernameError"),E.classList.add("error");return}g.disabled=!0,g.textContent="...",E.textContent="",E.classList.remove("error","success");const T=await en(c);g.disabled=!1,g.textContent=t("friends.addFriend"),E.textContent=T.message,T.success?(E.classList.add("success"),B.value="",await A()):E.classList.add("error")}),await A(),new ae("language-selector-container"),window.addEventListener("languageChanged",me)}async function pe(){ce(),ue(),ee("app"),await fe();const e=document.querySelector("#app");if(!e)return;e.innerHTML="",e.classList.add("app-shell"),window.removeEventListener("languageChanged",X),oe();const a=document.createElement("header");a.className="top-bar";const n=document.createElement("div");n.className="brand-mark";const o=document.createElement("span");o.textContent="Transcendence";const r=document.createElement("strong");r.dataset.role="dashboard-title",r.textContent=t("nav.home"),n.append(o,r),a.appendChild(n);const s=document.createElement("div");s.id="language-selector-container",a.appendChild(s),e.appendChild(a),new ae("language-selector-container"),window.addEventListener("languageChanged",X);const i=document.createElement("div");i.className="dashboard-grid",e.appendChild(i);const u=await G(),p=u?.data?.safeUser,w=document.createElement("section");w.className="glass-panel session-card";const d=document.createElement("h2");d.dataset.role="session-title",d.textContent=t("profile.welcome"),w.appendChild(d);const h=document.createElement("div");h.className="user-meta";const l=document.createElement("strong");l.textContent=p?p.name:u?.data?.currentSession?.alias||"Guest";const S=document.createElement("span");S.textContent=p?p.email:t("auth.signIn"),h.append(l,S),w.appendChild(h);const m=document.createElement("div");m.className="action-row";const v=document.createElement("button");if(v.className="glow-button",v.dataset.role="action-play",v.textContent=t("game.play"),v.addEventListener("click",()=>I("/playGame")),m.appendChild(v),p){const g=document.createElement("button");g.className="glow-button secondary",g.textContent=t("profile.userInfo"),g.addEventListener("click",()=>I("/profile")),m.appendChild(g);const E=document.createElement("button");E.className="glow-button secondary",E.dataset.role="action-logout",E.textContent=t("profile.logout"),E.addEventListener("click",async()=>{E.disabled=!0;try{await re(p.name),I("/")}catch(C){const L=C instanceof Error?C.message:"Unknown error";alert(`${t("errors.logoutFailed")}: ${L}`)}finally{E.disabled=!1}}),m.appendChild(E)}else{const g=document.createElement("button");g.className="glow-button secondary",g.dataset.role="action-login",g.textContent=t("buttons.login"),g.addEventListener("click",()=>I("/login")),m.appendChild(g)}if(w.appendChild(m),!p){const g=document.createElement("div");g.className="quick-form";const E=document.createElement("label");E.textContent=t("userEdit.newName");const C=document.createElement("input");C.dataset.role="input-alias",C.type="text",C.placeholder=t("userEdit.newName");const L=document.createElement("button");L.className="glow-button secondary",L.textContent=t("buttons.save"),L.addEventListener("click",async()=>{const A=C.value.trim();if(A){L.disabled=!0;try{await tn(A),C.value=""}finally{L.disabled=!1}}}),g.append(E,C,L),w.appendChild(g)}i.appendChild(w);const f=document.createElement("section");f.className="glass-panel quick-card";const b=document.createElement("h2");b.dataset.role="quick-form-title",b.textContent=t("buttons.save"),f.appendChild(b);const q=document.createElement("div");q.className="quick-form";const F=document.createElement("input");F.type="text",F.dataset.role="input-name",F.placeholder=t("forms.username"),q.appendChild(F);const U=document.createElement("input");U.type="text",U.dataset.role="input-info",U.placeholder=t("forms.userInfo"),q.appendChild(U);const P=document.createElement("input");P.type="email",P.dataset.role="input-email",P.placeholder=t("forms.email"),q.appendChild(P);const $=document.createElement("input");$.type="text",$.placeholder="Phone Number",$.dataset.role="input-phone",q.appendChild($);const x=document.createElement("input");x.type="password",x.dataset.role="input-password",x.placeholder=t("forms.password"),q.appendChild(x);const y=document.createElement("button");y.className="glow-button",y.dataset.role="action-add-user",y.textContent=t("buttons.save"),q.appendChild(y),f.appendChild(q),i.appendChild(f);const k=document.createElement("section");k.className="glass-panel community-panel";const j=document.createElement("h2");j.dataset.role="community-title",j.textContent=t("nav.users"),k.appendChild(j);const N=document.createElement("div");N.className="user-list",k.appendChild(N),e.appendChild(k);const M=g=>{N.innerHTML="",g.forEach(E=>{const C=document.createElement("div");C.className="user-pill";const L=document.createElement("h3");L.dataset.role="user-name-line",L.setAttribute("data-value",E.name||""),L.textContent=`${t("userList.userName")}: ${E.name}`;const A=document.createElement("p");A.dataset.role="user-info-line",A.setAttribute("data-value",E.info||""),A.textContent=`${t("userList.userInfo")}: ${E.info||""}`;const c=document.createElement("p");c.dataset.role="user-email-line",c.setAttribute("data-value",E.email||""),c.textContent=`${t("userList.userEmail")}: ${E.email}`,C.append(L,A,c),N.appendChild(C)})},B=async()=>{try{const g=await fetch("/api/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!g.ok){let A=g.statusText;try{A=(await g.json()).error||A}catch{const c=await g.text();c&&(A=c)}throw new Error(A)}const E=await g.text(),C=E?JSON.parse(E):[],L=C.data||C;Array.isArray(L)&&M(L)}catch(g){const E=g instanceof Error?g.message:"Unexpected error";console.error("Error fetching users:",g),N.innerHTML=`<div class="user-pill">${t("validation.fetchUsersError")}: ${E}</div>`}};await B(),y.addEventListener("click",async()=>{const g=F.value.trim(),E=U.value.trim(),C=P.value.trim(),L=$.value.trim(),A=x.value.trim();if(!g)return alert(t("validation.enterName"));if(!E)return alert(t("validation.enterUserInfo"));if(!C)return alert(t("validation.enterEmail"));if(!A)return alert(t("validation.enterPassword"));if(!L)return alert("Please insert a phone number");try{await ge({name:g,email:C,password:A,phoneNumber:L,info:E}),F.value="",U.value="",P.value="",$.value="",x.value="",await B()}catch(c){const T=c instanceof Error?c.message:"Unknown error";alert(`${t("validation.addUserError")}: ${T}`)}}),X()}async function G(){try{return await(await fetch("/api/me",{credentials:"include"})).json()}catch(e){console.log("Error fetching user info",e)}}async function fe(){try{await fetch("/api/init",{method:"GET",credentials:"include"})}catch(e){console.log("Error initializing user:",e)}}async function tn(e){const a=await G();if(a&&!a.data.guest)return{success:!1,error:"Cannot update guest alias for authenticated user"};try{const n=await fetch("/api/guest/alias",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({alias:e})}),o=await n.json();return n.ok?{success:!0}:{success:!1,error:o.data||"Failed to update alias"}}catch{return{success:!1,error:"Network error"}}}async function ge(e){const a=[];if(e.name||a.push(t("validation.enterName")),e.email||a.push(t("validation.enterEmail")),e.password||a.push(t("validation.enterPassword")),a.length)throw new Error(a[0]);const n={name:e.name,email:e.email,password:e.password,phoneNumber:e.phoneNumber,info:e.info},o=await fetch("/api/users",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){let r=o.statusText||"Failed to create user";try{r=(await o.json()).error||r}catch{}throw new Error(r)}return o.json()}async function re(e){const a=e?{name:e.trim()}:{},n=await fetch("/api/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){let o=n.statusText||"Logout failed";try{o=(await n.json()).error||o}catch{const r=await n.text();r&&(o=r)}throw new Error(o)}}let _=null;function nn(){_&&(window.removeEventListener("languageChanged",_),_=null)}async function an(){try{const e=await fetch("/api/users/profile_picture",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});return e.ok&&(await e.json())?.data?.url||null}catch(e){return console.error("Failed to load avatar:",e),null}}async function on(){nn(),document.body.classList.remove("landing-mode"),document.body.classList.add("app-mode");const e=document.querySelector("#app");if(!e)return;e.innerHTML="",e.classList.add("app-shell","profile-shell"),oe();let a;try{a=await G()}catch(y){console.error("Failed to fetch user info for profile:",y),a=null}const n=a?.data?.safeUser;if(!n){I("/login");return}const o=n.name||t("auth.guest"),r=n.email||"",s=n.info||"",i=await an(),u=document.createElement("header");u.className="profile-top-bar";const p=document.createElement("div");p.className="profile-brand";const w=document.createElement("strong");w.textContent="Transcendence";const d=document.createElement("span");d.dataset.role="profile-subtitle",d.textContent=t("profile.userInfo"),p.append(w,d),u.appendChild(p);const h=document.createElement("div");h.className="profile-top-controls";const l=document.createElement("button");l.className="profile-nav-button",l.dataset.role="profile-home-button",l.textContent=t("nav.home"),l.addEventListener("click",()=>I("/home")),h.appendChild(l);const S=document.createElement("button");S.className="profile-nav-button primary",S.dataset.role="profile-logout-button",S.textContent=t("profile.logout"),S.addEventListener("click",async()=>{S.disabled=!0;try{await re(n.name),I("/")}catch(y){const k=y instanceof Error?y.message:"Unknown error";alert(`${t("errors.logoutFailed")}: ${k}`)}finally{S.disabled=!1}}),h.appendChild(S);const m=document.createElement("div");m.id="language-selector-container",h.appendChild(m),u.appendChild(h),e.appendChild(u);const v=document.createElement("div");v.className="profile-content",e.appendChild(v);const f=document.createElement("section");f.className="profile-card glass-panel";const b=document.createElement("div");b.className="profile-avatar",i?b.style.backgroundImage=`url(${i})`:(b.textContent=o.slice(0,2).toUpperCase(),b.classList.add("fallback")),f.appendChild(b);const q=document.createElement("h1");q.dataset.role="profile-name",q.textContent=o,f.appendChild(q);const F=document.createElement("p");if(F.dataset.role="profile-email",F.textContent=r||t("auth.signIn"),f.appendChild(F),s){const y=document.createElement("p");y.dataset.role="profile-info",y.textContent=s,f.appendChild(y)}v.appendChild(f);const U=document.createElement("section");U.className="profile-stats-card glass-panel";const P=document.createElement("h2");P.dataset.role="profile-stats-title",P.textContent=t("profile.stats")||"Player Stats",U.appendChild(P);const $=document.createElement("div");$.className="profile-stats-placeholder",$.dataset.role="profile-stats-placeholder",$.textContent=t("profile.statsPlaceholder")||"Your match history and rankings will live here soon.",U.appendChild($),v.appendChild(U),new ae("language-selector-container");const x=()=>{d.textContent=t("profile.userInfo"),l.textContent=t("nav.home"),S.textContent=t("profile.logout"),P.textContent=t("profile.stats")||"Player Stats",$.textContent=t("profile.statsPlaceholder")||"Your match history and rankings will live here soon.",r||(F.textContent=t("auth.signIn"))};x(),_=x,window.addEventListener("languageChanged",_)}function rn(){ee("app");const e=document.querySelector("#app");if(!e)return;e.innerHTML="",e.classList.add("app-shell");const a=document.createElement("div");a.className="glass-panel",a.style.maxWidth="600px",a.style.margin="40px auto",a.style.padding="40px",a.style.textAlign="center";const n=document.createElement("h1");n.textContent="Theme Integration Test",n.style.fontSize="2rem",n.style.marginBottom="20px",n.className="home-headline";const o=document.createElement("p");o.textContent='This page demonstrates the "app" theme applied via the new applyTheme() function. Notice the background, font, and glass panel styling.',o.style.marginBottom="30px",o.style.color="rgba(255, 255, 255, 0.8)";const r=document.createElement("button");r.textContent="Back to Home",r.className="glow-button",r.onclick=()=>I("/home"),a.appendChild(n),a.appendChild(o),a.appendChild(r),e.appendChild(a)}async function sn(e,a,n={}){if(!e){alert(t("validation.enterUsername"));return}if(!a){alert(t("validation.enterPassword"));return}const o=n.submitButton;o&&(o.disabled=!0);const r={emailOrUser:e,password:a};try{const s=await fetch("/api/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){let w=s.statusText||"Login failed";try{w=(await s.json()).error||w}catch{}throw new Error(w)}const i=await s.json(),u=i.data||i,p=u.existingUser||u.user||i.user;if(u.message==="2FA required"&&p){n.onRequireTwoFA?n.onRequireTwoFA(p):n.form&&n.heading&&he(n.form,n.heading,p);return}n.onSuccess?await n.onSuccess():I("/home")}catch(s){const i=s;n.onError?n.onError(i.message):alert(`${t("auth.loginError")}: ${i.message}`),console.error("Login error:",s),o&&(o.disabled=!1);return}o&&(o.disabled=!1)}function he(e,a,n){a.textContent=t("twoFA.enterCode"),e.innerHTML="";const o=()=>{a.textContent=t("twoFA.enterCode");const i=e.querySelector('input[type="text"]');i&&(i.placeholder=t("twoFA.enterCode"));const u=e.querySelector("button");u&&(u.textContent=t("buttons.submit"))};window.addEventListener("languageChanged",o);const r=document.createElement("input");r.type="text",r.placeholder=t("twoFA.enterCode"),r.className="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",e.appendChild(r);const s=document.createElement("button");s.textContent=t("buttons.submit"),s.className="w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition duration-200 ease-in-out transform hover:scale-105",e.appendChild(s),s.addEventListener("click",()=>{s.disabled=!0;const i=r.value.trim();if(!i)return s.disabled=!1,alert(t("twoFA.invalidCode"));const u={userId:n.id,twoFAcode:i};fetch("/api/login/2fa",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:u.userId})}).then(async p=>{if(!p.ok){const w=await p.json();throw new Error(w.error||"Login failed")}return p.json()}).then(p=>{const w=p.data||p;w.message==="QR 2FA"&&fetch("/api/login/2fa/QR",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(async d=>{if(!d.ok){const h=await d.json();throw new Error(h.error||"Login failed")}return d.json()}).then(()=>{I("/")}).catch(d=>{alert(`${t("auth.loginError")}: ${d.message}`),console.error("Login error:",d),s.disabled=!1}),w.message==="SMS or Email 2FA"&&fetch("/api/login/2fa/SMSOrEmail",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(async d=>{if(!d.ok){const h=await d.json();throw new Error(h.error||"Login failed")}return d.json()}).then(()=>{I("/"),s.disabled=!1}).catch(d=>{alert(`${t("auth.loginError")}: ${d.message}`),console.error("Login error:",d),s.disabled=!1})}).catch(p=>{alert(`${t("auth.loginError")}: ${p.message}`),console.error("Login error:",p),s.disabled=!1})})}function ln(e){const a=document.querySelector("#app");if(!a)return;a.innerHTML="";const n=document.createElement("div");n.className="fixed top-0 left-0 w-full h-full bg-black bg-opacity-40 flex justify-center items-center z-50";const o=document.createElement("div");o.className="bg-white p-6 rounded-lg shadow-lg space-y-4 space-x-2 max-w-md w-full";const r=document.createElement("input");r.type="text",r.placeholder=t("userEdit.newName"),r.value=e.name,r.className="w-full border border-gray-300 px-3 py-2 rounded";const s=document.createElement("input");s.type="text",s.placeholder=t("userEdit.newInfo"),s.value=e.info,s.className="w-full border border-gray-300 px-3 py-2 rounded";const i=document.createElement("input");i.type="email",i.placeholder=t("userEdit.newEmail"),i.value=e.email,i.className="w-full border border-gray-300 px-3 py-2 rounded";const u=document.createElement("input");u.type="password",u.placeholder=t("userEdit.newPassword"),u.className="w-full border border-gray-300 px-3 py-2 rounded";const p=document.createElement("button");p.textContent=t("buttons.save"),p.className="bg-blue-500 hover:bg-blue-600 text-white font-bold px-4 py-2 rounded";const w=document.createElement("button");w.textContent=t("buttons.cancel"),w.className="bg-gray-400 hover:bg-gray-500 text-white font-bold px-4 py-2 rounded",o.append(r,s,i,u,p,w),n.appendChild(o),a.appendChild(n),w.onclick=()=>I("/"),p.onclick=()=>{const S={name:r.value.trim(),info:s.value.trim(),email:i.value.trim(),password:u.value.trim()};fetch(`/api/users/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}).then(async m=>{if(!m.ok){const v=await m.json();throw new Error(v.error||"Failed to update")}return m.json()}).then(()=>{n.remove(),I("/")}).catch(m=>{console.error(m),alert(`${t("userEdit.updateError")}: ${m.message}`)})};const d=document.createElement("label");d.textContent="Upload avatar";const h=document.createElement("input");h.type="file",h.accept="image/png, image/jpeg, image/webp",d.appendChild(h);const l=document.createElement("img");l.style.width="96px",l.style.height="96px",l.style.objectFit="cover",l.style.borderRadius="50%",l.alt="avatar preview",o.appendChild(d),o.appendChild(l),h.addEventListener("change",async()=>{const S=h.files?.[0];if(S){l.src=URL.createObjectURL(S);try{const m=await dn(e.id,S);l.src=`${m}?t=${Date.now()}`;const v=document.getElementById("avatarImg");v&&(v.src=`${m}?t=${Date.now()}`),alert("Upload successful")}catch(m){console.error("Upload error",m),alert("Upload failed: "+m.message)}}})}async function dn(e,a){const n=new FormData;n.append("file",a);const o=await fetch(`/api/users/${e}/profile_picture`,{method:"PUT",credentials:"include",body:n});if(!o.ok){const i=await o.text().catch(()=>null);throw new Error(`Upload failed: ${o.status} ${o.statusText} ${i||""}`)}const r=await o.json().catch(()=>({}));return r.url||(r.filename?`/profile_pictures/${r.filename}`:r.fileName?`/profile_pictures/${r.fileName}`:null)}let W=null,Q=null,H=null,J=null;function cn(){W!==null&&(cancelAnimationFrame(W),W=null),Q&&(window.removeEventListener("resize",Q),Q=null)}function K(){cn(),H&&(window.removeEventListener("keydown",H),H=null),J&&(window.removeEventListener("languageChanged",J),J=null)}function un(e){const a=e.querySelector("#bouncing-ball"),n=e.querySelector("#paddle-left"),o=e.querySelector("#paddle-right");if(!a||!n||!o)return;const r=50,s=50,i=60,u=60,p=40,w=40,d=30,h=35,l={left:d,top:d,right:window.innerWidth-d-r,bottom:window.innerHeight-d-s},S=()=>{l.right=window.innerWidth-d-r,l.bottom=window.innerHeight-d-s};let m=l.left+Math.random()*Math.max(0,l.right-l.left),v=l.top+Math.random()*Math.max(0,l.bottom-l.top),f=(Math.random()-.5)*32||4,b=(Math.random()-.5)*32||4,q=0;const F=($,x,y)=>Math.max(x,Math.min(y,$));Q=()=>{S(),m=F(m,l.left,l.right),v=F(v,l.top,l.bottom)},window.addEventListener("resize",Q);const U=()=>window.innerWidth-w-i,P=()=>{q+=.02;const $=window.innerHeight-120,y=60+(Math.sin(q)+1)/2*$,k=y-u/2,j=y+u/2;n.style.top=`${k}px`,o.style.top=`${k}px`,m+=f,v+=b;let N=!1,M=!1;if(m<=l.left&&(m=l.left,f=-f,N=!0),m>=l.right&&(m=l.right,f=-f,N=!0),v<=l.top&&(v=l.top,b=-b,M=!0),v>=l.bottom&&(v=l.bottom,b=-b,M=!0),N||M){const L=N&&M?1.12:1.04;let A=Math.sqrt(f*f+b*b)*L;A>h&&(A=h);const c=Math.atan2(b,f);f=Math.cos(c)*A,b=Math.sin(c)*A}const B=p,g=U();if(m+r>=B&&m<=B+i&&v+s>=k&&v<=j){const E=v+s/2,C=k+u/2,L=(E-C)/(u/2);m=B+i,f=Math.abs(f)||6,b+=L*6;let A=Math.sqrt(f*f+b*b)*1.08;A>h&&(A=h);const c=Math.atan2(b,f);f=Math.cos(c)*A,b=Math.sin(c)*A}if(m<=g+i&&m+r>=g&&v+s>=k&&v<=j){const E=v+s/2,C=k+u/2,L=(E-C)/(u/2);m=g-r,f=-Math.abs(f)||-6,b+=L*6;let A=Math.sqrt(f*f+b*b)*1.08;A>h&&(A=h);const c=Math.atan2(b,f);f=Math.cos(c)*A,b=Math.sin(c)*A}a.style.left=`${m}px`,a.style.top=`${v}px`,W=requestAnimationFrame(P)};m=F(m,l.left,l.right),v=F(v,l.top,l.bottom),W=requestAnimationFrame(P)}function Z(e){const a=e.querySelector("#sign-btn");a&&(a.textContent=t("buttons.login"));const n=e.querySelector("#guest-btn");n&&(n.textContent=t("auth.continueGuest"));const o=e.querySelector("#modal-title");if(o){const m=o.dataset.mode==="signup"?"signup":"login";o.textContent=t(m==="signup"?"auth.createAccount":"auth.welcomeBack")}const r=e.querySelector("#modal-copy");if(r){const m=r.dataset.mode==="signup"?"signup":"login";r.textContent=t(m==="signup"?"auth.signupSubtitle":"auth.signIn")}const s=e.querySelector("#login-username");s&&(s.placeholder=t("forms.username"));const i=e.querySelector("#login-password");i&&(i.placeholder=t("forms.password"));const u=e.querySelector("#login-submit");u&&(u.textContent=t("buttons.login"));const p=e.querySelector("#signup-name");p&&(p.placeholder=t("forms.username"));const w=e.querySelector("#signup-email");w&&(w.placeholder=t("forms.email"));const d=e.querySelector("#signup-password");d&&(d.placeholder=t("forms.password"));const h=e.querySelector("#signup-submit");h&&(h.textContent=t("auth.createAccount"));const l=e.querySelector('[data-auth-tab="login"]');l&&(l.textContent=t("buttons.login"));const S=e.querySelector('[data-auth-tab="signup"]');S&&(S.textContent=t("auth.createAccount"))}function mn(e){const a=e.querySelector('input[type="text"]');a&&(a.className="modal-input");const n=e.querySelector("button");n&&(n.className="submit")}function pn(e,a){const n=e.querySelector("#auth-modal"),o=n?.querySelector(".modal"),r=e.querySelector("#sign-btn"),s=e.querySelector("#guest-btn"),i=e.querySelector("#login-form"),u=e.querySelector("#signup-form"),p=e.querySelector("#modal-title"),w=e.querySelector("#modal-copy"),d=e.querySelector("#login-feedback"),h=Array.from(e.querySelectorAll("[data-auth-tab]"));if(!n||!o||!r||!s||!i||!u||!p)return;let l=e.querySelector("#login-username"),S=e.querySelector("#login-password"),m=e.querySelector("#login-submit");const v=()=>{l=i.querySelector("#login-username"),S=i.querySelector("#login-password"),m=i.querySelector("#login-submit")},f=()=>{i.innerHTML=`
			<input class="modal-input" id="login-username" type="text" placeholder="${t("forms.username")}" autocomplete="username" data-auth="username" />
			<input class="modal-input" id="login-password" type="password" placeholder="${t("forms.password")}" autocomplete="current-password" />
			<button id="login-submit" class="submit" type="submit">${t("buttons.login")}</button>
		`,v()},b=x=>{const y=x==="signup"?"signup":"login";h.forEach(k=>{const j=k.dataset.authTab===y;k.classList.toggle("active",j),k.setAttribute("aria-selected",String(j))}),i.classList.toggle("active",y==="login"),i.setAttribute("aria-hidden",y==="login"?"false":"true"),u.classList.toggle("active",y==="signup"),u.setAttribute("aria-hidden",y==="signup"?"false":"true"),p&&(p.dataset.mode=y),w&&(w.dataset.mode=y),Z(e)};h.forEach(x=>{x.addEventListener("click",()=>{const y=x.dataset.authTab==="signup"?"signup":"login";b(y)})});const q=()=>{n.classList.remove("open"),n.setAttribute("aria-hidden","true"),d?.setAttribute("data-status",""),d&&(d.textContent=""),f(),Z(e),b("login")},F=()=>{n.classList.add("open"),n.setAttribute("aria-hidden","false"),b("login"),l?.focus()},U=async()=>{q(),K(),document.body.classList.remove("landing-mode"),I("/home")},P=x=>{x.preventDefault(),d&&(d.textContent=""),!(!l||!S||!m)&&sn(l.value.trim(),S.value.trim(),{form:i,heading:p,submitButton:m,onSuccess:U,onRequireTwoFA:y=>{he(i,p,y),mn(i)},onError:y=>{d&&(d.textContent=y,d.dataset.status="error")}})};f(),i.addEventListener("submit",P);const $=async x=>{x.preventDefault();const y=u.querySelector("#signup-name"),k=u.querySelector("#signup-email"),j=u.querySelector("#signup-password"),N=u.querySelector("#signup-submit");if(!(!y||!k||!j||!N)){N.disabled=!0;try{await ge({name:y.value.trim(),email:k.value.trim(),password:j.value.trim()}),y.value="",k.value="",j.value="",d&&(d.textContent=t("auth.signupSuccess"),d.dataset.status="success")}catch(M){const B=M instanceof Error?M.message:String(M);d&&(d.textContent=B,d.dataset.status="error")}finally{N.disabled=!1}}};u.addEventListener("submit",$),H||(H=x=>{x.key==="Escape"&&q()},window.addEventListener("keydown",H)),n.addEventListener("click",()=>q()),o.addEventListener("click",x=>x.stopPropagation()),r.addEventListener("click",()=>F()),s.addEventListener("click",async()=>{s.disabled=!0;try{await fe(),K(),document.body.classList.remove("landing-mode"),I("/home")}catch(x){console.error("Guest initialization error:",x),s.disabled=!1}}),a.openLogin&&F()}async function de(e={}){const a=document.querySelector("#app");if(!a)return;document.body.classList.remove("landing-mode"),document.body.classList.add("landing-mode"),K();let n=null;try{n=await G()}catch{n=null}if(n&&n.data&&n.data.safeUser){ee("app"),K(),be("/home");return}a.innerHTML=`
		<div class="landing-shell">
			<div id="bouncing-ball" class="bouncing-ball"></div>
			<div id="paddle-left" class="paddle paddle-left"></div>
			<div id="paddle-right" class="paddle paddle-right"></div>
			<div class="landing-content">
				<div class="landing-actions">
					<button id="sign-btn" class="btn">${t("buttons.login")}</button>
					<button id="guest-btn" class="btn ghost">${t("auth.continueGuest")}</button>
				</div>
				<div id="auth-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true">
					<div class="modal auth-modal" role="document">
						<div class="auth-panel">
							<div class="auth-header">
								<h3 id="modal-title" data-mode="login">${t("auth.welcomeBack")}</h3>
								<p id="modal-copy" data-mode="login">${t("auth.signIn")}</p>
							</div>
							<div class="auth-tabs" role="tablist">
								<button type="button" class="auth-tab active" data-auth-tab="login" aria-selected="true">${t("buttons.login")}</button>
								<button type="button" class="auth-tab" data-auth-tab="signup" aria-selected="false">${t("auth.createAccount")}</button>
							</div>
							<div class="auth-form-stack">
								<form id="login-form" class="auth-form active" aria-label="Log in form">
									<input class="modal-input" id="login-username" type="text" placeholder="${t("forms.username")}" autocomplete="username" data-auth="username" />
									<input class="modal-input" id="login-password" type="password" placeholder="${t("forms.password")}" autocomplete="current-password" />
									<button id="login-submit" class="submit" type="submit">${t("buttons.login")}</button>
								</form>
								<form id="signup-form" class="auth-form" aria-label="Sign up form">
									<input class="modal-input" id="signup-name" type="text" placeholder="${t("forms.username")}" autocomplete="name" />
									<input class="modal-input" id="signup-email" type="email" placeholder="${t("forms.email")}" autocomplete="email" />
									<input class="modal-input" id="signup-password" type="password" placeholder="${t("forms.password")}" autocomplete="new-password" />
									<button id="signup-submit" class="submit" type="submit">${t("auth.createAccount")}</button>
								</form>
							</div>
							<p id="login-feedback" class="modal-feedback" aria-live="polite"></p>
						</div>
					</div>
				</div>
			</div>
		</div>
	`;const o=a.querySelector(".landing-shell");o&&(Z(o),J=()=>{Z(o)},window.addEventListener("languageChanged",J),pn(o,e),un(o))}function O(){K(),document.body.classList.remove("landing-mode")}async function fn(e){O(),await pe(),setTimeout(e,0)}function I(e,a={}){history.pushState(a,"",e),te()}function be(e,a={}){history.replaceState(a,"",e),te()}async function te(){const e=window.location.pathname;if(e==="/"||e===""){de();return}if(e==="/home"){O(),await le();return}if(e==="/login"){de({openLogin:!0});return}if(e==="/user_managment"||e==="/user_management"){O(),await pe();return}if(e==="/playGame"){O();return}if(e==="/editProfile"){await fn(async()=>{let a;try{a=await G()}catch{a=null}const n=a.data.safeUser;if(!n){be("/");return}ln(n)});return}if(e==="/profile"||e.startsWith("/profile")){O(),await on();return}if(e==="/test-theme"){O(),rn();return}O(),await le()}window.addEventListener("popstate",()=>{te()});te();
